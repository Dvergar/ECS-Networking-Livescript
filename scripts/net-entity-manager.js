// Generated by LiveScript 1.2.0
(function(){
  'use strict';
  var NetEntityManager, net, out$ = typeof exports != 'undefined' && exports || this;
  NetEntityManager = (function(superclass){
    var entities, prototype = extend$((import$(NetEntityManager, superclass).displayName = 'NetEntityManager', NetEntityManager), superclass).prototype, constructor = NetEntityManager;
    NetEntityManager.ids = 0;
    entities = {};
    prototype.input = new dcodeIO.ByteBuffer;
    prototype.output = new dcodeIO.ByteBuffer;
    function NetEntityManager(){
      this.onData = this._onData;
    }
    prototype.createEntity = function(){
      var entity;
      entity = em.createEntity();
      return entities[entity.id] = entity;
    };
    prototype.addComponent = function(entity, component){
      return em.addComponent(entity(component));
    };
    prototype.pump = function(){
      var x$, ab, y$;
      if (this.output.offset > 0) {
        x$ = this.output;
        ab = this.send(
        x$.toArrayBuffer());
        x$.reset();
      }
      if (this.input.offset > 0) {
        y$ = this.input;
        y$.flip();
        this.readMessage();
        y$.reset();
        return y$;
      }
    };
    prototype.readMessage = function(){
      var x$;
      console.log('readMessage');
      x$ = CPosition.decode(this.input);
      console.log(x$.x);
      console.log(x$.y);
      return x$;
    };
    prototype._send = function(data){
      this.output.append(
      dcodeIO.ByteBuffer.wrap(
      data));
      return console.log(this.output.offset);
    };
    prototype._onData = function(data){
      return this.input.append(
      dcodeIO.ByteBuffer.wrap(
      data));
    };
    return NetEntityManager;
  }(Net));
  out$.net = net = new NetEntityManager;
  function extend$(sub, sup){
    function fun(){} fun.prototype = (sub.superclass = sup).prototype;
    (sub.prototype = new fun).constructor = sub;
    if (typeof sup.extended == 'function') sup.extended(sub);
    return sub;
  }
  function import$(obj, src){
    var own = {}.hasOwnProperty;
    for (var key in src) if (own.call(src, key)) obj[key] = src[key];
    return obj;
  }
}).call(this);
